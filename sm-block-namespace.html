<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="./sm-block-namespace-global.html"> <dom-module id="sm-block-namespace"> <script>!function(){"use strict";var e={};e.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var t=function(){function t(){e.classCallCheck(this,t)}return e.createClass(t,[{key:"beforeRegister",value:function(){this.is="sm-block-namespace",this.properties={block:{value:null,observer:"_blockObserver"},elements:{type:Array,value:[]},uid:{type:String,notify:!0}},this.observers=["refreshElements(block)"]}},{key:"addElement",value:function(e){this.push("elements",e)}},{key:"removeElement",value:function(e){var t=this.elements.indexOf(e);-1!==t&&this.splice("elements",t,1)}},{key:"_blockObserver",value:function(e,t){e&&(e._smNamespace=this),t&&t._smNamespace===this&&delete t._smNamespace}},{key:"refreshElements",value:function(e){var t=this;if(e)for(var n=void 0,r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){return e.parentElement&&e.parentElement.namespace===t?NodeFilter.FILTER_REJECT:e.joinNamespace&&!e.namespace?NodeFilter.FILTER_ACCEPT:e._smNamespace?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP}});r.nextNode()&&(n=r.currentNode);)n.namespace=this}},{key:"behaviors",get:function(){return this._behaviors||(this._behaviors=[simpla.behaviors.blockNamespaceGlobal])},set:function(e){this._behaviors=e}}]),t}();Polymer(t)}();</script></dom-module>