<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="./sm-block-namespace-global.html"> <dom-module id="sm-block-namespace"> <script>!function(){"use strict";function e(){var e=void 0,t=void 0;e=document.body,t=document.createElement("sm-block-namespace"),t.block=e,Object.defineProperty(e,"sid",{get:function(){return this._smNamespace.gid},set:function(e){this._smNamespace.gid=e},enumerable:!0}),Object.defineProperty(e,"gid",{get:function(){return this._smNamespace.gid},set:function(e){this._smNamespace.gid=e},enumerable:!0}),e.gid=e.getAttribute("gid")||e.getAttribute("sid")||""}function t(){document.body&&(e(),document.removeEventListener("readystatechange",t))}function n(){document.body?e():document.addEventListener("readystatechange",t)}var r={};r.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var s=function(){function e(){r.classCallCheck(this,e)}return r.createClass(e,[{key:"beforeRegister",value:function(){this.is="sm-block-namespace",this.properties={block:{value:null,observer:"_blockObserver"},elements:{type:Array,value:[]},uid:{type:String,notify:!0}},this.observers=["refreshElements(block)"]}},{key:"addElement",value:function(e){this.push("elements",e)}},{key:"removeElement",value:function(e){var t=this.elements.indexOf(e);-1!==t&&this.splice("elements",t,1)}},{key:"_blockObserver",value:function(e,t){e&&(e._smNamespace=this),t&&t._smNamespace===this&&delete t._smNamespace}},{key:"refreshElements",value:function(e){var t=this;if(e){var n=void 0,r=void 0,s=void 0;for(s=function(e){return e.parentElement&&e.parentElement.namespace===t?NodeFilter.FILTER_REJECT:e.joinNamespace&&!e.namespace?NodeFilter.FILTER_ACCEPT:e._smNamespace?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},s.acceptNode=s,r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,s,!1);r.nextNode()&&(n=r.currentNode);)n.namespace=this}}},{key:"behaviors",get:function(){return this._behaviors||(this._behaviors=[simpla.behaviors.blockNamespaceGlobal])},set:function(e){this._behaviors=e}}]),e}();Polymer(s),n()}()</script> </dom-module>