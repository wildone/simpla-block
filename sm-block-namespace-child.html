<link rel="import" href="./sm-block-namespace-global.html"> <script>!function(){"use strict";function e(e){return"undefined"!=typeof e}var i={};i.classCallCheck=function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")},i.createClass=function(){function e(e,i){for(var n=0;n<i.length;n++){var a=i[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(i,n,a){return n&&e(i.prototype,n),a&&e(i,a),i}}(),window.simpla=window.simpla||{},window.simpla.behaviors=window.simpla.behaviors||{};var n={properties:{sid:String,namespace:{value:null,observer:"joinNamespace"}},observers:["_updateUidFromSid(namespace, sid)"],attached:function(){this.updateNamespace()},joinNamespace:function(i,n){var a=this;this._namespaceListener||(this._namespaceListener=function(i){var n=i.detail.value;if(e(n)){var t=a.gid||a.sid,s=a.gid?null:n;a._changeUid(a._computeUid(s,t))}else a._changeUid(void 0)}),i&&(i.addElement(this),i.addEventListener("uid-changed",this._namespaceListener)),n&&(n.removeElement(this),n.removeEventListener("uid-changed",this._namespaceListener))},_changeUid:function(e){this._setUid?this._setUid(e):this.uid=e},_computeUid:function(e,i){return e?e+"."+i:i},_updateUidFromSid:function(i,n){if(this.gid)return void console.warn("Element cannot have both gid and sid attributes set. Using gid ('"+this.gid+"').");if(-1!==n.indexOf("."))return void console.error("The sid attribute must not contain '.'. This element will not save or fetch data.");if(i&&e(i.uid)){var a=this._computeUid(i.uid,n);this._changeUid(a)}else this._changeUid(void 0)},updateNamespace:function(){for(var e=this,i=!1;!i&&(e=e.parentElement);)i=!!e._smNamespace;this.namespace=e&&i?e._smNamespace:null}};window.simpla.behaviors.blockNamespaceChild=[n,window.simpla.behaviors.blockNamespaceGlobal]}()</script>